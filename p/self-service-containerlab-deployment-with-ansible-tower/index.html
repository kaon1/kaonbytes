<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='Generating dynamic ContainerLab topology files with ansible to facilitate team labbing and learning'><title>Self-Service ContainerLab Deployment with Ansible Tower</title>
<link rel=canonical href=https://kaonbytes.com/p/self-service-containerlab-deployment-with-ansible-tower/><link rel=stylesheet href=/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css><meta property='og:title' content='Self-Service ContainerLab Deployment with Ansible Tower'><meta property='og:description' content='Generating dynamic ContainerLab topology files with ansible to facilitate team labbing and learning'><meta property='og:url' content='https://kaonbytes.com/p/self-service-containerlab-deployment-with-ansible-tower/'><meta property='og:site_name' content='KaonBytes'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2023-07-24T00:00:00+00:00'><meta property='article:modified_time' content='2023-07-24T00:00:00+00:00'><meta property='og:image' content='https://kaonbytes.com/p/self-service-containerlab-deployment-with-ansible-tower/images/clab-ansible.png'><meta name=twitter:site content="@kaon_123"><meta name=twitter:creator content="@kaon_123"><meta name=twitter:title content="Self-Service ContainerLab Deployment with Ansible Tower"><meta name=twitter:description content="Generating dynamic ContainerLab topology files with ansible to facilitate team labbing and learning"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://kaonbytes.com/p/self-service-containerlab-deployment-with-ansible-tower/images/clab-ansible.png'><link rel="shortcut icon" href=favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-LE0JVZ0N09"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LE0JVZ0N09")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/profile-new_hu0424c52cde2ba37c8617ad2cd064c5ee_88533_300x0_resize_q75_box.jpg width=300 height=450 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>KaonBytes</a></h1><h2 class=site-description>Welcome to my technical blog on all things Networking, Security and Automation</h2></div></header><ol class=social-menu><li><a href=https://github.com/kaon1 target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/kaon1/ target=_blank title=LinkedIn><svg role="img" xmlns="http://www.w3.org/2000/svg" width="1e3mm" height="1e3mm" viewBox="0 0 1e3 1e3" style="max-width:1.6em;height:auto"><path id="path" style="opacity:1;vector-effect:none;fill:#000;fill-opacity:1" d="M336 332s0 457 0 457-125 0-125 0 0-457 0-457 125 0 125 0m10-126s0 0 0 0c0 41-33 74-73 74s-72-33-72-74c0-40 32-73 72-73s73 33 73 73M834 508s0 281 0 281-125 0-125 0 0-233 0-233c0-140-166-129-166 0V789s-124 0-124 0 0-457 0-457 124 0 124 0 0 74 0 74c58-108 291-116 291 102" transform=""/></svg></a></li><li><a href=https://twitter.com/kaonthana target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/learning-links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Learning Links</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://kaonbytes.com/ selected>English</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/self-service-containerlab-deployment-with-ansible-tower/><img src=/p/self-service-containerlab-deployment-with-ansible-tower/images/clab-ansible_hu900e690d7d00d8033c3afbeaf3ab65f6_51076_800x0_resize_box_3.png srcset="/p/self-service-containerlab-deployment-with-ansible-tower/images/clab-ansible_hu900e690d7d00d8033c3afbeaf3ab65f6_51076_800x0_resize_box_3.png 800w, /p/self-service-containerlab-deployment-with-ansible-tower/images/clab-ansible_hu900e690d7d00d8033c3afbeaf3ab65f6_51076_1600x0_resize_box_3.png 1600w" width=800 height=311 loading=lazy alt="Featured image of post Self-Service ContainerLab Deployment with Ansible Tower"></a></div><div class=article-details><header class=article-category><a href=/categories/ansible/>Ansible
</a><a href=/categories/arista/>Arista
</a><a href=/categories/containerlab/>Containerlab
</a><a href=/categories/netdevops/>Netdevops</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/self-service-containerlab-deployment-with-ansible-tower/>Self-Service ContainerLab Deployment with Ansible Tower</a></h2><h3 class=article-subtitle>Generating dynamic ContainerLab topology files with ansible to facilitate team labbing and learning</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jul 24, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>8 minute read</time></div></footer></div></header><section class=article-content><h2 id=about>About</h2><p>Not long ago, I was asked by <a class=link href=https://www.linkedin.com/in/beevek/ target=_blank rel=noopener>Kris Beevers</a>, the CEO of <a class=link href=https://netboxlabs.com/ target=_blank rel=noopener>NetBox Labs</a> &mdash; what actionable steps I recommend for individuals who are interested in a career in network engineering. My number one answer is to <strong>lab it up</strong>. Deploying a lab environment and getting hands on to solve a real (or made up) problem is the best way to accelerate your learning.</p><p>There are multiple ways to create network lab environments: if you have the resources to grab real physical gear go for it. However, this has limitations, there is a cost to this, power, cabling, and space requirements. Another option is to use an application such as EVE-NG or GNS3. These platforms let you deploy virtual machine based labs. However, the images are usually memory intensive and setting up the topology is not programmatically friendly.</p><p>Luckily for us, in the last few years more and more vendors are providing <strong>containerized network operating systems</strong>. A network OS hosted on a docker container uses significantly less cpu and memory and can be deployed using infrastructure-as-code methods (IAC)</p><p>SRL Labs has built an open source tool called <a class=link href=https://containerlab.dev/ target=_blank rel=noopener>ContainerLab</a> which can orchestrate a routing topology for these network containers. In addition to network operating systems, ContainerLab allows us to deploy and virtually wire-up arbitrary linux containers to host applications. This can allow for full end-to-end testing of the application and network stack.</p><p>ContainerLab does have somewhat of a learning curve get labs up and running. I realize that not all network engineers want to learn a new platform or how docker containers work. For these cases, I built an <strong>Ansible wrapper</strong> which lets a user deploy their own pre-canned lab environment using Ansible Tower. The hope is that this limits the barrier to entry for using ContainerLab.</p><h2 id=workflow>Workflow</h2><ol><li>User Selects their Desired Pre-Canned Lab Topology</li><li>User Selects their desired Router Image</li><li>Action:<ul><li>Deploy - Start Lab from Scratch</li><li>Inspect - Show information about existing already deployed lab</li><li>Save - logs into all routers of lab and saves config (can also be done manually on cli)</li><li>Shutdown - powers off lab routers but keeps the config on server (config persists on next lab deployment)</li><li>Destroy - powers off lab routers and deletes all configs on server (all saved configs lost)</li></ul></li><li>After Job is complete. Lab Nodes can be accessed by following the output prompts</li></ol><p>Ansible Tower Prompts:
<img src=/p/self-service-containerlab-deployment-with-ansible-tower/images/1.png width=1118 height=762 srcset="/p/self-service-containerlab-deployment-with-ansible-tower/images/1_hu26c6b7f2d240e4e7407ddc0731078e08_46000_480x0_resize_box_3.png 480w, /p/self-service-containerlab-deployment-with-ansible-tower/images/1_hu26c6b7f2d240e4e7407ddc0731078e08_46000_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=146 data-flex-basis=352px></p><p>Lab to be Deployed using Arista cEOS images:
<img src=/p/self-service-containerlab-deployment-with-ansible-tower/images/2.png width=3300 height=2331 srcset="/p/self-service-containerlab-deployment-with-ansible-tower/images/2_huc0d5f341ffaa331a76de479faf341211_152468_480x0_resize_box_3.png 480w, /p/self-service-containerlab-deployment-with-ansible-tower/images/2_huc0d5f341ffaa331a76de479faf341211_152468_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=141 data-flex-basis=339px></p><p>Results of Ansible Playbook:
<img src=/p/self-service-containerlab-deployment-with-ansible-tower/images/4.png width=1305 height=960 srcset="/p/self-service-containerlab-deployment-with-ansible-tower/images/4_hu61387814d885a6b902f72f487ec6d209_113978_480x0_resize_box_3.png 480w, /p/self-service-containerlab-deployment-with-ansible-tower/images/4_hu61387814d885a6b902f72f487ec6d209_113978_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=135 data-flex-basis=326px></p><p>Deployed Docker Images:
<img src=/p/self-service-containerlab-deployment-with-ansible-tower/images/5.png width=1556 height=385 srcset="/p/self-service-containerlab-deployment-with-ansible-tower/images/5_hu48f6497a6837e32c88b8e2402c425ab1_89339_480x0_resize_box_3.png 480w, /p/self-service-containerlab-deployment-with-ansible-tower/images/5_hu48f6497a6837e32c88b8e2402c425ab1_89339_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=404 data-flex-basis=969px></p><p>The unique lab names (per user) and unique port-mappings per container allow for multiple engineers to deploy the same lab on the same server.</p><p>Logging into one of the routers:
<img src=/p/self-service-containerlab-deployment-with-ansible-tower/images/6.png width=793 height=509 srcset="/p/self-service-containerlab-deployment-with-ansible-tower/images/6_hu6f3642df626a4bf36c97c574a59313d2_67237_480x0_resize_box_3.png 480w, /p/self-service-containerlab-deployment-with-ansible-tower/images/6_hu6f3642df626a4bf36c97c574a59313d2_67237_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=155 data-flex-basis=373px></p><h2 id=how-it-works>How it Works</h2><p>The full code and other lab topologies can be found here: <a class=link href=https://github.com/kaon1/containerlab-selfservice target=_blank rel=noopener>https://github.com/kaon1/containerlab-selfservice</a></p><h3 id=creating-the-containerlab-topology-files>Creating the ContainerLab Topology Files</h3><p>We can use a jinja2 template to dynamically create unique topology files per user and per lab. For <a class=link href=https://github.com/kaon1/containerlab-selfservice/blob/main/labs/spine-leaf-datacenter-lab01/spine-leaf-datacenter-lab01.j2 target=_blank rel=noopener>example</a>, here we have the jinja2 template for the spine-leaf-datacenter lab:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span>{{<span class=w> </span><span class=l>lab_title }}-{{ lab_username }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>prefix</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>topology</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nodes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>{{<span class=w> </span><span class=l>lab_title }}-{{ lab_username }}-spine01:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}:latest&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=s2>&#34;5{{ user_map[lab_username] }}01:22&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>{{<span class=w> </span><span class=l>lab_title }}-{{ lab_username }}-spine02:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}:latest&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=s2>&#34;5{{ user_map[lab_username] }}02:22&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>{{<span class=w> </span><span class=l>lab_title }}-{{ lab_username }}-leaf01:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}:latest&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=s2>&#34;5{{ user_map[lab_username] }}03:22&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>{{<span class=w> </span><span class=l>lab_title }}-{{ lab_username }}-leaf02:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}:latest&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=s2>&#34;5{{ user_map[lab_username] }}04:22&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>{{<span class=w> </span><span class=l>lab_title }}-{{ lab_username }}-leaf03:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}:latest&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=s2>&#34;5{{ user_map[lab_username] }}05:22&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>{{<span class=w> </span><span class=l>lab_title }}-{{ lab_username }}-leaf04:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ router_container_kind }}:latest&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=s2>&#34;5{{ user_map[lab_username] }}06:22&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>{{<span class=w> </span><span class=l>lab_title }}-{{ lab_username }}-client01:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ host_container_kind }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ host_container_kind }}:latest&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=s2>&#34;5{{ user_map[lab_username] }}07:22&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>{{<span class=w> </span><span class=l>lab_title }}-{{ lab_username }}-client02:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ host_container_kind }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ host_container_kind }}:latest&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=s2>&#34;5{{ user_map[lab_username] }}08:22&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>links</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>{<span class=l>%for link in links %}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span>{{<span class=w> </span><span class=l>lab_title }}-{{ lab_username }}-{{link[&#39;endpoints&#39;][0]}},{{ lab_title }}-{{ lab_username }}-{{link[&#39;endpoints&#39;][1]}}]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>{<span class=l>% endfor %}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>mgmt</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>network</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ lab_title }}-{{ lab_username }}-network&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ipv4-subnet</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ ipv4_subnet | ansible.utils.ipaddr }}&#34;</span><span class=w>
</span></span></span></code></pre></div><p>The virtual wiring is handled by the endpoints file <a class=link href=https://github.com/kaon1/containerlab-selfservice/blob/main/labs/spine-leaf-datacenter-lab01/spine-leaf-datacenter-lab01-vars.yml target=_blank rel=noopener>here</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>links</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;spine01:eth1&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;spine02:eth1&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;spine01:eth2&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf01:eth2&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;spine01:eth3&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf02:eth2&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;spine01:eth4&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf03:eth2&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;spine01:eth5&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf04:eth2&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;spine01:eth6&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;spine02:eth6&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;spine02:eth2&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf01:eth3&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;spine02:eth3&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf02:eth3&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;spine02:eth4&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf03:eth3&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;spine02:eth5&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf04:eth3&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;leaf01:eth1&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf02:eth1&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;leaf01:eth6&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf02:eth6&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;leaf03:eth1&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf04:eth1&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;leaf03:eth6&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf04:eth6&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;client01:eth1&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf01:eth4&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>endpoints</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;client02:eth1&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;leaf04:eth4&#34;</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></div><p>The other base vars are populated by this <a class=link href=https://github.com/kaon1/containerlab-selfservice/blob/main/labs/base_vars.yml target=_blank rel=noopener>file</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c>### Base vars to get over-written by Ansible Tower Survey (i.e. Extra Vars) at runtime</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>lab_hosts</span><span class=p>:</span><span class=w> </span><span class=l>containerlab01.server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>lab_username</span><span class=p>:</span><span class=w> </span><span class=l>kaon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>lab_userid</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;11&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>lab_title</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;server-core-lab01&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>router_container_kind</span><span class=p>:</span><span class=w> </span><span class=l>ceos</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>host_container_kind</span><span class=p>:</span><span class=w> </span><span class=l>linux</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>wireshark_command</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;ssh clab@containerlab01.server &#39;sudo ip netns exec &lt;container_name&gt; tcpdump -U -nni &lt;intf&gt; -w -&#39; | /mnt/c/Program\\ Files/Wireshark/wireshark.exe -k -i -&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>actions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>user_map</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jack</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;00&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jill</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;01&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>john</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;02&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>bob</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;03&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mary</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;04&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>joe</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;05&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>kaon</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;11&#34;</span><span class=w>
</span></span></span></code></pre></div><h3 id=ansible-wrapper>Ansible Wrapper</h3><p>We can use Ansible to take in user input, render the jinja2 template and launch the ContainerLab binary. The ansible playbook can also handle tearing down and destroying the topology.</p><p><a class=link href=https://github.com/kaon1/containerlab-selfservice/blob/main/labs/containerlab_engine.yml target=_blank rel=noopener>containerlab_engine.yml</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Container Lab Engine for Self Service Labs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>gather_facts</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ lab_hosts }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>become</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>vars_files</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=s2>&#34;{{ lab_title }}/{{ lab_title }}-vars.yml&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>base_vars.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>tasks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>### Create User and Lab specific directory on remote linux server hosting containerlab</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Create User Specific Lab Directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>file</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/opt/containerlab/labs/{{ lab_username }}/{{ lab_title }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>state</span><span class=p>:</span><span class=w> </span><span class=l>directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#34;deploy&#34; in actions&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>### Declare unique Subnet Per user to be used later for Docker Container network</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set CLAB Docker IP Network for Each User</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>set_fact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ipv4_subnet</span><span class=p>:</span><span class=w> </span><span class=m>172.100</span><span class=l>.{{ user_map[lab_username] }}.0/24</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>changed_when</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#34;deploy&#34; in actions&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>### Use local topology jinja2 file to build remote containerlab topology file with per user/lab variables</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Lab Topology File</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>src</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ lab_title }}/{{ lab_title }}.j2&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>dest</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/opt/containerlab/labs/{{ lab_username }}/{{ lab_title }}/{{lab_title}}-{{ lab_username }}.clab.yml&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#34;deploy&#34; in actions&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>### Run Container Lab Deploy to build lab from .clab.yaml topology file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Lab File</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>chdir</span><span class=p>:</span><span class=w> </span><span class=l>/opt/containerlab/labs/{{ lab_username }}/{{ lab_title }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>containerlab deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#34;deploy&#34; in actions&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>### Show All Docker Containers Running By current User</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Show Docker Containers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>chdir</span><span class=p>:</span><span class=w> </span><span class=l>/opt/containerlab/labs/{{ lab_username }}/{{ lab_title }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>docker container ls -f name={{lab_username}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>register</span><span class=p>:</span><span class=w> </span><span class=l>docker_output</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>(&#34;deploy&#34; in actions) or (&#34;inspect&#34; in actions)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Print Docker Output</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>msg</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ docker_output.stdout_lines }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>docker_output is defined</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>(&#34;deploy&#34; in actions) or (&#34;inspect&#34; in actions)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>### Inspect containerlab info for current user and lab</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Inspect Lab Topology</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>chdir</span><span class=p>:</span><span class=w> </span><span class=l>/opt/containerlab/labs/{{ lab_username }}/{{ lab_title }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>containerlab inspect</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>register</span><span class=p>:</span><span class=w> </span><span class=l>deploy_output</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=l>(&#34;deploy&#34; in actions) or (&#34;inspect&#34; in actions)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Print Lab Topology Output</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>msg</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ deploy_output.stdout_lines }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>deploy_output is defined</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>(&#34;deploy&#34; in actions) or (&#34;inspect&#34; in actions)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>### Powerdown lab nodes while maintaining startup configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Shutdown Lab</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>chdir</span><span class=p>:</span><span class=w> </span><span class=l>/opt/containerlab/labs/{{ lab_username }}/{{ lab_title }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>containerlab destroy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#34;shutdown&#34; in actions&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>### Powerdown and delete all startup configuration of nodes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Destroy Lab</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>chdir</span><span class=p>:</span><span class=w> </span><span class=l>/opt/containerlab/labs/{{ lab_username }}/{{ lab_title }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>containerlab destroy -c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#34;destroy&#34; in actions&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>### Run containerlab save on all nodes to save startup configs locally</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Save Lab</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>chdir</span><span class=p>:</span><span class=w> </span><span class=l>/opt/containerlab/labs/{{ lab_username }}/{{ lab_title }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>containerlab save</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#34;save&#34; in actions&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Print Instructions</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.debug</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>msg</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=s2>&#34;to connect to your Containers: ssh clab@{{inventory_hostname}}:5{{ user_map[lab_username] }}XX&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=s2>&#34;to create IP interface on a linux container. First SSH then RUN command: sudo ifconfig &lt;interface&gt; &lt;ip&gt; netmask &lt;mask&gt;&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=s2>&#34;to capture traffic and redirect locally to windows wireshark: {{ wireshark_command }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>when</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>deploy_output is defined</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>(&#34;deploy&#34; in actions) or (&#34;inspect&#34; in actions)</span><span class=w>
</span></span></span></code></pre></div><h3 id=garbage-collector>Garbage Collector</h3><p>If a user forgets to tear down their lab. We can run a periodic garbage collector playbook which checks for labs running longer than 7 days and powers them down.</p><p><a class=link href=https://github.com/kaon1/containerlab-selfservice/blob/main/garbage-collector/garbage-collector.yml target=_blank rel=noopener>garbage-collector.yml</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Service to Shutdown Long Running ContainerLabs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>gather_facts</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span><span class=w> </span><span class=l>localhost</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>become</span><span class=p>:</span><span class=w> </span><span class=kc>yes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>tasks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Grab List of All Running ContainerLab Docker Instances</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>chdir</span><span class=p>:</span><span class=w> </span><span class=l>/opt/containerlab/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=l>containerlab inspect -a --details -f json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>register</span><span class=p>:</span><span class=w> </span><span class=l>containerlab_inspect</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Loop through and inspect each ID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>chdir</span><span class=p>:</span><span class=w> </span><span class=l>/opt/containerlab/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;docker inspect {{ item[&#39;ShortID&#39;]}}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>register</span><span class=p>:</span><span class=w> </span><span class=l>docker_inspect_raw</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with_items</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{containerlab_inspect.stdout}}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>loop_control</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>label</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ item[&#39;ShortID&#39;]}}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Create ID to Creation timestamp dictionary mapping</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>set_fact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>timestamps</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ timestamps | default({}) | combine( {item.item.Labels[&#39;clab-topo-file&#39;]: item.stdout | from_json | json_query(&#39;[0].Created&#39;)}) }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with_items</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{docker_inspect_raw.results}}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>loop_control</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>label</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{item.cmd[2]}}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>custom filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>set_fact</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>list_to_shutdown</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ timestamps | timestamp_differ }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Loop through and shutdown long running labs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ansible.builtin.command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>chdir</span><span class=p>:</span><span class=w> </span><span class=l>/opt/containerlab/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cmd</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;containerlab destroy -t {{ item }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with_items</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{list_to_shutdown}}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>loop_control</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>label</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ item}}&#34;</span><span class=w>
</span></span></span></code></pre></div><h3 id=other-pre-canned-labs>Other Pre-Canned Labs</h3><h4 id=wan-lab-01>Wan Lab 01</h4><p><a class=link href=https://github.com/kaon1/containerlab-selfservice/tree/main/labs/wan-lab01 target=_blank rel=noopener>wan-lab-01</a>
<img src=/p/self-service-containerlab-deployment-with-ansible-tower/images/wan-lab-01.png width=3274 height=2648 srcset="/p/self-service-containerlab-deployment-with-ansible-tower/images/wan-lab-01_hue71fd7938e177547775dcea4e475b571_240891_480x0_resize_box_3.png 480w, /p/self-service-containerlab-deployment-with-ansible-tower/images/wan-lab-01_hue71fd7938e177547775dcea4e475b571_240891_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=123 data-flex-basis=296px></p><h4 id=server-core-lab-01>Server Core Lab 01</h4><p><a class=link href=https://github.com/kaon1/containerlab-selfservice/tree/main/labs/server-core-lab01 target=_blank rel=noopener>server-core</a>
<img src=/p/self-service-containerlab-deployment-with-ansible-tower/images/server-core-lab-01.png width=2850 height=2649 srcset="/p/self-service-containerlab-deployment-with-ansible-tower/images/server-core-lab-01_hu858428baf6f8018bac007db122e6eaa9_183818_480x0_resize_box_3.png 480w, /p/self-service-containerlab-deployment-with-ansible-tower/images/server-core-lab-01_hu858428baf6f8018bac007db122e6eaa9_183818_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=107 data-flex-basis=258px></p><h4 id=spine-leaf-lab-01>Spine Leaf Lab 01</h4><p><a class=link href=https://github.com/kaon1/containerlab-selfservice/tree/main/labs/spine-leaf-datacenter-lab01 target=_blank rel=noopener>spine-leaf</a>
<img src=/p/self-service-containerlab-deployment-with-ansible-tower/images/spine-leaf.png width=3300 height=2331 srcset="/p/self-service-containerlab-deployment-with-ansible-tower/images/spine-leaf_huc0d5f341ffaa331a76de479faf341211_152468_480x0_resize_box_3.png 480w, /p/self-service-containerlab-deployment-with-ansible-tower/images/spine-leaf_huc0d5f341ffaa331a76de479faf341211_152468_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=141 data-flex-basis=339px></p><h3 id=linux-image-and-lacp-bonding>Linux Image and LACP Bonding</h3><p>In order to test real-world scenarios, we can spin up an alpine-linux container and connect it to our router images with LACP link bonding.</p><p>We build the docker image using this dockerfile and build script found <a class=link href=https://github.com/kaon1/containerlab-selfservice/blob/main/alpine-linux-host/build.sh target=_blank rel=noopener>here</a>
Once built, we can use the image in our topology files as clients or servers.</p><h3 id=wireshark-and-iperf>Wireshark and iperf</h3><p>Testing end-to-end application and network connectivty may require more than just ping and traceroute. We can do full wireshark packet captures on any of the links. We can also generate traffic with iperf from the pre-built alpine linux containers.</p><p>To capture traffic and redirect locally to windows wireshark:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl> ssh clab@containerlab01.server <span class=s1>&#39;sudo ip netns exec &lt;container_name&gt; tcpdump -U -nni &lt;intf&gt; -w -&#39;</span> <span class=p>|</span> /mnt/c/Program<span class=se>\\</span> Files/Wireshark/wireshark.exe -k -i -
</span></span></code></pre></div><p>To run an iperf server one of the alpine-linux containers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker <span class=nb>exec</span> -it &lt;container-name&gt; /bin/sh -c <span class=s2>&#34;sudo iperf3 -s -B &lt;iperf-server-ip&gt; -p 5201&#34;</span>
</span></span></code></pre></div><p>To run an iperf client test:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker <span class=nb>exec</span> -it &lt;container-name&gt; /bin/sh -c <span class=s2>&#34;sudo iperf3 -c &lt;iperf-server-ip&gt; -b 10Mbit -p 5201 -P 5 -t 60&#34;</span>
</span></span></code></pre></div><h2 id=end>End</h2><p>I hope a guide like this can help ease the barrier to entry for creating network lab environments. If you have any questions don&rsquo;t hesitate to reach out to me on my socials. Thank you.</p></section><footer class=article-footer></footer></article><aside class=related-contents--wrapper><h2 class=section-title>Related contents</h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/p/building-a-datacenter-as-code-with-arista-cloudvision/><div class=article-image><img src=/p/building-a-datacenter-as-code-with-arista-cloudvision/images/dcac-front.e17c503945054eca9922bcf6fd46b4e7_hu9ac709360588aaaee1a03ffb9aefd712_150968_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Building a DataCenter As Code with Arista CloudVision" data-hash="md5-4XxQOUUFTsqZIrz2/Ua05w=="></div><div class=article-details><h2 class=article-title>Building a DataCenter As Code with Arista CloudVision</h2></div></a></article><article class=has-image><a href=/p/golden-configuration-deployment-with-ansible-and-netbox/><div class=article-image><img src=/p/golden-configuration-deployment-with-ansible-and-netbox/golden-config-front.0a95a4dbc7df190c14802b057fde04f9_hu3972f5f5b3bf12cabffe22f75756d981_1247419_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Golden Configuration Deployment with Ansible and Netbox" data-hash="md5-CpWk28ffGQwUgCsFf94E+Q=="></div><div class=article-details><h2 class=article-title>Golden Configuration Deployment with Ansible and Netbox</h2></div></a></article><article class=has-image><a href=/p/ansible-configuration-backup-manager/><div class=article-image><img src=/p/ansible-configuration-backup-manager/_hu12225e3f406182c91634608ad7cb2c64_1239508_1af7a87b45fb3b73a9c1c716fe9eb0f9.png width=250 height=150 loading=lazy alt="Featured image of post Ansible Configuration Backup Manager" data-hash="md5-+TQ8PJ8mkUygm6V0xYsxfQ=="></div><div class=article-details><h2 class=article-title>Ansible Configuration Backup Manager</h2></div></a></article><article class=has-image><a href=/p/netbox-dynamic-inventory-for-ansible-as-a-feedback-loop/><div class=article-image><img src=/p/netbox-dynamic-inventory-for-ansible-as-a-feedback-loop/_hu91008c89e08c35be24c68bc187db22be_244905_6b7b6c28489eabc0762e130a45e366ac.png width=250 height=150 loading=lazy alt="Featured image of post Netbox Dynamic Inventory for Ansible as a feedback loop" data-hash="md5-isvFNqFle3F1LJV2T6/Njg=="></div><div class=article-details><h2 class=article-title>Netbox Dynamic Inventory for Ansible as a feedback loop</h2></div></a></article><article class=has-image><a href=/p/a-case-study-in-hybrid-cloud-network-design/><div class=article-image><img src=/p/a-case-study-in-hybrid-cloud-network-design/images/front2.4f619109542b6500dbd4fdd5aa6dab84_hu9bcde3317be3c40344c69cb562d5c034_33248_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post A Case Study in Hybrid Cloud Network Design" data-hash="md5-T2GRCVQrZQDb1P3Vqm2rhA=="></div><div class=article-details><h2 class=article-title>A Case Study in Hybrid Cloud Network Design</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//kaonbytes-com.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{DISQUS&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2024 KaonBytes</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.11.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#about>About</a></li><li><a href=#workflow>Workflow</a></li><li><a href=#how-it-works>How it Works</a><ol><li><a href=#creating-the-containerlab-topology-files>Creating the ContainerLab Topology Files</a></li><li><a href=#ansible-wrapper>Ansible Wrapper</a></li><li><a href=#garbage-collector>Garbage Collector</a></li><li><a href=#other-pre-canned-labs>Other Pre-Canned Labs</a><ol><li><a href=#wan-lab-01>Wan Lab 01</a></li><li><a href=#server-core-lab-01>Server Core Lab 01</a></li><li><a href=#spine-leaf-lab-01>Spine Leaf Lab 01</a></li></ol></li><li><a href=#linux-image-and-lacp-bonding>Linux Image and LACP Bonding</a></li><li><a href=#wireshark-and-iperf>Wireshark and iperf</a></li></ol></li><li><a href=#end>End</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>